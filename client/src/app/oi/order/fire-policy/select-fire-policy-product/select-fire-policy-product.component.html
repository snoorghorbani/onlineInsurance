<div fxLayout="row">
  <div fxFlex="100" fxLayout="column" fxLayoutGap="25px">
    <mat-card>
      <h3>بیمه نامه خود را انتخاب نمایید.</h3>
      <mat-card-content fxLayout="row wrap" fxLayoutGap="25px">
        <div fxFlex="100">
            <mat-form-field >
                  <mat-chip-list #chipList>
                    <mat-chip
                      *ngFor="let fruit of selectedadditionalCoverage"
                      selectable="true"
                      removable="true"
                      (removed)="remove(fruit)">
                      {{fruit}}
                      <mat-icon matChipRemove>cancel</mat-icon>
                    </mat-chip>
                    <input
                      placeholder="New fruit..."
                      #additionalCoverageInput
                      [formControl]="additionalCoverageFormControl"
                      [matAutocomplete]="auto"
                      [matChipInputFor]="chipList"
                      [matChipInputAddOnBlur]="addOnBlur"
                      (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
                    <!-- [matChipInputSeparatorKeyCodes]="separatorKeysCodes" -->
                  <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                    <mat-option *ngFor="let fruit of filteredCoverage | async" [value]="fruit">
                      {{fruit}}
                    </mat-option>
                  </mat-autocomplete>
              </mat-form-field>
        </div>
        <div *ngIf="selectedProduct" fxFlex="100" fxLayout="row wrap" fxLayoutGap="25px">
          <div fxFlex="40">
            قیمت
          </div>
          <div fxFlex="40">
            {{selectedProduct.Price}}
          </div>
          <div  fxFlex="40">
            قیمت نهایی
          </div>
          <div  fxFlex="40">
            {{selectedProduct.FinalPrice}}
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions *ngIf="mode == 'view'" align="end">
        <button mat-raised-button color="primary" (click)="editMode()">ویرایش</button>
      </mat-card-actions>
    </mat-card>

  <mat-accordion multi="true" [@mode]="mode">
    <mat-expansion-panel *ngFor="let policy of policies$ | async" (opened)="open(policy)">
      <mat-expansion-panel-header collapsedHeight="100px">
        <mat-panel-title>
            <img class="logo" [src]="logos[policy.InsuranceCompany]" >
            <h4 class="card-title">{{getFinalPrice(policy)}}</h4>
        </mat-panel-title>
        <mat-panel-description>
          <button mat-raised-button color="primary" (click)="selectPolicy(policy)">سفارش</button>
          <!-- <div class="price">
            {{getPrice(policy)}}
          </div> -->
          <!-- <div class="finalPrice">
            
          </div> -->
        </mat-panel-description>
      </mat-expansion-panel-header>
            <div fxLayout="row" fxLayoutGap="25px">
              <div fxFlex="40">
                <table mat-table [dataSource]="companyInfoDataSource" matSort>
                  <ng-container matColumnDef="key">
                    <td mat-cell *matCellDef="let element"> {{element.key}} </td>
                  </ng-container>
                  <ng-container matColumnDef="value">
                    <td mat-cell *matCellDef="let element"> {{element.value}} </td>
                  </ng-container>
                  <tr mat-row *matRowDef="let row; columns: companyInfoDisplayCol;"></tr>
                </table>
              </div>
              <div fxFlex="40">
                <table mat-table [dataSource]="policyInfoDataSource" matSort>
                  <ng-container matColumnDef="key">
                    <td mat-cell *matCellDef="let element"> {{element.key}} </td>
                  </ng-container>
                  <ng-container matColumnDef="value">
                    <td mat-cell *matCellDef="let element"> {{element.value}} </td>
                  </ng-container>
                  <tr mat-row *matRowDef="let row; columns: companyInfoDisplayCol;"></tr>
                </table>
              </div>
            </div>
  </mat-expansion-panel>
</mat-accordion>
</div>

</div>


<!-- [policy]="policy" 
[policyTerm]="SelectedPolicyTerm$ | async" 
(click)="showCompanyInfo(policy)"
(selected)="selectPolicy($event)"> -->